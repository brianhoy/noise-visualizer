!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="/",t(0)}([function(e,t,r){"use strict";var n=r(1);self.importScripts("public/scripts/vendor/three.min.js","public/scripts/vendor/simplex.js");var i=function(){function e(){var e=this;this.chunkGenerator=new n.ChunkGenerator(1e3,10,null),self.onmessage=function(t){switch(t.data.type){case"generateChunks":e.generateChunks(t.data.data);break;case"setGeneratorSettings":var r=t.data.data.chunkSize;e.chunkGenerator.chunkSize=r}}}return e.prototype.generateChunks=function(e){for(var t=new Array,r=0,n=e;r<n.length;r++){var i=n[r],s=this.chunkGenerator.generateChunkGeometryData(i);t.push({coords:[i.x,i.y],geometryData:s})}return t},e}();new i;console.log("ChunkGenerator.worker loaded")},function(e,t,r){"use strict";var n=r(2),i=function(){function e(e,t,r){this.chunkSize=e,this.segments=t,this.noiseGenerator=r,this.groundMaterial=new THREE.MeshLambertMaterial}return e.prototype.generateChunk=function(e){for(var t=new THREE.Vector3(e.x*this.chunkSize,0,e.y*this.chunkSize),r=new THREE.PlaneBufferGeometry(this.chunkSize,this.chunkSize,this.segments,this.segments),i=r.attributes.position.array,s=2;s<i.length;s+=3){var o=new THREE.Vector2((t.x+i[s-2])/5e3,(-t.z+i[s-1])/5e3);i[s]+=this.noiseGenerator.noise(o.x,o.y)}console.log("vertices[1] = ",i[1]),r.computeVertexNormals(),r.rotateX(-Math.PI/2),r.translate(t.x,0,t.z);var a=new THREE.Mesh(r,this.groundMaterial);return a.receiveShadow=!0,new n.Chunk(a,e)},e.prototype.generateChunkGeometryData=function(e){var t={},r=new THREE.Vector3(e.x*this.chunkSize,0,e.y*this.chunkSize),n=new THREE.PlaneBufferGeometry(this.chunkSize,this.chunkSize,this.segments,this.segments);t.vertices=n.attributes.position.array,t.normal=n.attributes.normal.array,t.uv=n.attributes.uv.array,t.indices=n.getIndex().array;for(var i=2;i<t.vertices.length;i+=3){var s=new THREE.Vector2((r.x+t.vertices[i-2])/5e3,(-r.z+t.vertices[i-1])/5e3);t.vertices[i]+=1e3*this.noiseGenerator.noise(s.x,+s.y)}return t},e.prototype.generateChunkFromGeometryData=function(e,t){var r=new THREE.Vector3(e.x*this.chunkSize,0,e.y*this.chunkSize),i=new THREE.BufferGeometry;i.setIndex(new THREE.BufferAttribute(t.indices,1)),i.addAttribute("position",new THREE.BufferAttribute(t.vertices,3)),i.addAttribute("normal",new THREE.BufferAttribute(t.normal,3)),i.addAttribute("uv",new THREE.BufferAttribute(t.uvs,2)),i.computeVertexNormals(),i.rotateX(-Math.PI/2),i.translate(r.x,0,r.z);var s=new THREE.Mesh(i,this.groundMaterial);s.receiveShadow=!0;var o=new n.Chunk(s,e);return o},e.prototype.setChunkSize=function(e){this.chunkSize=e},e.prototype.setSegments=function(e){this.segments=e},e.prototype.setNoiseGenerator=function(e){this.noiseGenerator=e},e.prototype.fastSigmoid=function(e){return e/(1+Math.abs(e))},e}();t.ChunkGenerator=i},function(e,t){"use strict";var r=function(){function e(e,t){this.mesh=e,this.chunkCoordinates=t}return e}();t.Chunk=r}]);
//# sourceMappingURL=c6af69ab3b60999b3a45.worker.js.map